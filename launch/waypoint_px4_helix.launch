<launch>
  <!-- Waypoint Publisher untuk PX4 internal PID (trajectory helix/spiral) -->
  <node pkg="mpc_offboard"
        type="waypoint_publisher_px4.py"
        name="waypoint_publisher_px4"
        output="screen">

    <!-- Pilih mode trajectory -->
    <param name="waypoint_mode" value="helix"/>

    <!-- Parameter helix (NED frame) -->
    <!-- center_n / center_e = pusat spiral dalam meter relatif home -->
    <param name="helix_center_n"        value="0.0"/>
    <param name="helix_center_e"        value="0.0"/>
    <param name="helix_radius"          value="10.0"/>     <!-- radius horizontal 1 m -->
    <param name="helix_start_altitude"  value="-10.0"/>   <!-- mulai dari 10 m -->
    <param name="helix_end_altitude"    value="-30.0"/>   <!-- naik sampai 30 m -->
    <param name="helix_turns"           value="3.0"/>     <!-- 3 putaran penuh -->
    <param name="helix_points"          value="120"/>     <!-- jumlah waypoint (lebih banyak = lebih smooth) -->

    <!-- Mode tracking -->
    <param name="continuous_mode"    value="true"/>   <!-- smooth, tidak stop di setiap WP -->
    <param name="acceptance_radius"  value="0.8"/>    <!-- dipakai kalau continuous_mode=false -->
    <param name="lookahead_distance" value="2.0"/>    <!-- jarak sebelum advance ke WP berikut -->
    <param name="loop_mission"       value="false"/>  <!-- false = sekali naik selesai -->

  </node>
</launch>
